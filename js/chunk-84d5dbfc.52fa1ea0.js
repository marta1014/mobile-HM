(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84d5dbfc"],{"0130":function(e,t,n){},"07ac":function(e,t,n){var r=n("23e7"),a=n("6f53").values;r({target:"Object",stat:!0},{values:function(e){return a(e)}})},"3f52":function(e,t,n){"use strict";var r=n("0130"),a=n.n(r);a.a},"6f53":function(e,t,n){var r=n("83ab"),a=n("df75"),o=n("fc6a"),u=n("d1e7").f,c=function(e){return function(t){var n,c=o(t),s=a(c),i=s.length,l=0,d=[];while(i>l)n=s[l++],r&&!u.call(c,n)||d.push(e?[n,c[n]]:c[n]);return d}};e.exports={entries:c(!0),values:c(!1)}},"9ed6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loginPage"},[n("van-nav-bar",{attrs:{title:"登陆"}}),n("ValidationObserver",{ref:"form"},[n("ValidationProvider",{attrs:{name:"手机号",rules:"required|mobile"}},[n("van-field",{attrs:{required:"",label:"手机号",placeholder:"请输入用户名"},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}})],1),n("ValidationProvider",{attrs:{name:"验证码",rules:"required|code"}},[n("van-field",{attrs:{required:"",label:"验证码",placeholder:"请输入验证码"},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}},[e.countdownShow?n("van-count-down",{attrs:{slot:"button",format:"ss s",time:6e4},on:{finish:function(t){e.countdownShow=!1}},slot:"button"}):n("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:e.onSendSmsCode},slot:"button"},[e._v("发送验证码")])],1)],1)],1),n("van-cell",[n("van-button",{attrs:{type:"info"},on:{click:e.onLogin}},[e._v("登陆")])],1)],1)},a=[],o=(n("7db0"),n("07ac"),n("96cf"),n("1da1")),u=n("c24f"),c=n("32a0"),s={name:"loginPage",data:function(){return{user:{mobile:"13911111111",code:"246810"},countdownShow:!1}},methods:{onLogin:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.user,t.next=3,e.$refs.form.validate();case 3:if(r=t.sent,r){t.next=7;break}return setTimeout((function(){var t=e.$refs.form.errors,n=Object.values(t).find((function(e){return e[0]}));e.$toast(n[0])}),100),t.abrupt("return");case 7:return e.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),t.prev=8,e.$toast.success("登陆成功"),a=e.$route.query.redirect||"/",e.$router.push(a),t.next=14,Object(u["e"])(n);case 14:o=t.sent,e.$store.commit("setUser",o.data.data),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](8),e.$toast.fail("登陆失败"),e.countdownShow=!1;case 22:case"end":return t.stop()}}),t,null,[[8,18]])})))()},onSendSmsCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.user.mobile,t.next=3,Object(c["d"])(n,"required|mobile",{name:"手机号"});case 3:if(r=t.sent,r.valid){t.next=7;break}return e.$toast(r.errors[0]),t.abrupt("return");case 7:return t.prev=7,e.countdownShow=!0,t.next=11,Object(u["b"])(n);case 11:t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](7),e.countdownShow=!1,429===t.t0.response.status&&e.$toast("请勿频繁发送"),e.$toast.fail("发送失败");case 18:case"end":return t.stop()}}),t,null,[[7,13]])})))()}}},i=s,l=(n("3f52"),n("2877")),d=Object(l["a"])(i,r,a,!1,null,"151cafb7",null);t["default"]=d.exports},c24f:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return l}));var r=n("b775"),a=function(e){return Object(r["a"])({url:"/app/v1_0/authorizations",method:"post",data:e})},o=function(e){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(e)})},u=function(){return Object(r["a"])({url:"/app/v1_0/user"})},c=function(){return Object(r["a"])({url:"/app/v1_0/user/channels"})},s=function(){return Object(r["a"])({url:"/app/v1_0/user/profile"})},i=function(e){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:e})},l=function(e){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:e})}}}]);
//# sourceMappingURL=chunk-84d5dbfc.52fa1ea0.js.map